generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model comment {
  created_at DateTime @default(now()) @db.Timestamptz(6)
  user_id    String   @db.Uuid
  tick_id    String   @db.Uuid
  content    String
  id         String   @id @default(dbgenerated("extensions.uuid_generate_v4()")) @db.Uuid
  tick       tick     @relation(fields: [tick_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user       user     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model heart {
  created_at DateTime @default(now()) @db.Timestamptz(6)
  tick_id    String   @db.Uuid
  user_id    String   @db.Uuid
  tick       tick     @relation(fields: [tick_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user       user     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([tick_id, user_id])
}

model tick {
  id            String    @id @default(dbgenerated("extensions.uuid_generate_v4()")) @db.Uuid
  created_at    DateTime  @default(now()) @db.Timestamptz(6)
  updated_at    DateTime  @default(now()) @db.Timestamptz(6)
  user_id       String    @db.Uuid
  content       String
  heart_count   Int       @default(0)
  comment_count Int       @default(0)
  user          user      @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  comment       comment[]
  heart         heart[]
}

model user {
  id         String    @id @default(dbgenerated("extensions.uuid_generate_v4()")) @db.Uuid
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  username   String    @unique
  healthy    Boolean   @default(true)
  password   String
  comment    comment[]
  heart      heart[]
  tick       tick[]
}
